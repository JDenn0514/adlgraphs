<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Transformations • adlgraphs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Inter-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Data Transformations">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-#e5f3f7" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adlgraphs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data_transformations.html">Data Transformations</a></li>
    <li><a class="dropdown-item" href="../articles/how_to_use_adl_bar_plot.html">Making bar plots</a></li>
    <li><a class="dropdown-item" href="../articles/make_coefficient_plots.html">Making Coefficient Plots</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JDenn0514/adlgraphs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data Transformations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JDenn0514/adlgraphs/blob/main/vignettes/data_transformations.Rmd" class="external-link"><code>vignettes/data_transformations.Rmd</code></a></small>
      <div class="d-none name"><code>data_transformations.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load in the libraries</span></span>
<span></span>
<span><span class="co"># for num_rev and test_data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JDenn0514/adlgraphs" class="external-link">adlgraphs</a></span><span class="op">)</span></span>
<span><span class="co"># this is for some other basic data transformations</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p><code>adlgraphs</code> provides four main functions to reduce the
amount of time it takes to perform a few very common data
transformations:</p>
<ul>
<li><p>`flip_val() - flips the valence of a vector</p></li>
<li><p><code><a href="../reference/num_rev.html">num_rev()</a></code> - reverses the values of a vector</p></li>
<li><p><code><a href="../reference/make_dicho.html">make_dicho()</a></code> - converts a vector to a dichotomous
factor</p></li>
<li><p><code><a href="../reference/make_binary.html">make_binary()</a></code> - converts a vector to a binary (0 and
1)</p></li>
</ul>
<div class="section level2">
<h2 id="num_rev-and-flip_val">
<code>num_rev()</code> and <code>flip_val()</code><a class="anchor" aria-label="anchor" href="#num_rev-and-flip_val"></a>
</h2>
<p>Let’s create a vector called <code>blue</code> that measures people’s
agreement with the statement “I like the color blue” and set it so that
a higher number means more disagreement.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># create the vector</span></span>
<span><span class="va">blue</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">20</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># add value labels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">blue</span>, <span class="st">"labels"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Strongly agree"</span> <span class="op">=</span> <span class="fl">1</span>, </span>
<span>  <span class="st">"Somewhat agree"</span> <span class="op">=</span> <span class="fl">2</span>, </span>
<span>  <span class="st">"Somewhat disagree"</span> <span class="op">=</span> <span class="fl">3</span>, </span>
<span>  <span class="st">"Strongly disagree"</span> <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># add a variable label</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">blue</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"I like the color blue"</span></span>
<span></span>
<span><span class="co"># make it a haven-labelled object (this is just for printing purposes)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">blue</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"haven_labelled"</span>, <span class="st">"vctrs_vctr"</span>, <span class="st">"double"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show the output and attributes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">blue</span><span class="op">)</span></span>
<span><span class="co">#&gt;  int+lbl [1:20] 1, 3, 4, 3, 1, 2, 3, 3, 3, 4, 2, 1, 1, 1, 3, 4, 3, 1, 2, 2</span></span>
<span><span class="co">#&gt;  @ labels: Named num [1:4] 1 2 3 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr [1:4] "Strongly agree" "Somewhat agree" "Somewhat disagree" "Strongly disagree"</span></span>
<span><span class="co">#&gt;  @ label : chr "I like the color blue"</span></span></code></pre></div>
<p>Now, given the way the statement is written, we would naturally
assume a higher number means more agreement and therefore the person
likes blue more. However, that’s not the case. This is particularly
relevant when comparing means or running regressions, etc. To fix this,
we just need to reverse the values and their associated labels to show
that a higher number means more agreement. This is what
<code><a href="../reference/num_rev.html">num_rev()</a></code> does.</p>
<p>Looking at the example below, we can see that the labels for the two
vectors are reversed and the values are different as well. However, the
variable labels for both are the same. Doing it this way ensures that
the overall output of the question stays the same. We still get the same
percentage of people who agree and disagree, but the actual numbers that
underlie the variable have reversed.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># reverse the direction of the scale</span></span>
<span><span class="va">blue_rev</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/num_rev.html">num_rev</a></span><span class="op">(</span><span class="va">blue</span><span class="op">)</span></span>
<span><span class="co"># let's compare the two</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>blue <span class="op">=</span> <span class="va">blue</span>, blue_rev <span class="op">=</span> <span class="va">blue_rev</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ blue    : int+lbl [1:20] 1, 3, 4, 3, 1, 2, 3, 3, 3, 4, 2, 1, 1, 1, 3, 4, 3, 1, 2, 2</span></span>
<span><span class="co">#&gt;    ..@ labels: Named num [1:4] 1 2 3 4</span></span>
<span><span class="co">#&gt;    .. ..- attr(*, "names")= chr [1:4] "Strongly agree" "Somewhat agree" "Somewhat disagree" "Strongly disagree"</span></span>
<span><span class="co">#&gt;    ..@ label : chr "I like the color blue"</span></span>
<span><span class="co">#&gt;  $ blue_rev: dbl+lbl [1:20] 4, 2, 1, 2, 4, 3, 2, 2, 2, 1, 3, 4, 4, 4, 2, 1, 2, 4, 3, 3</span></span>
<span><span class="co">#&gt;    ..@ labels        : Named num [1:4] 1 2 3 4</span></span>
<span><span class="co">#&gt;    .. ..- attr(*, "names")= chr [1:4] "Strongly disagree" "Somewhat disagree" "Somewhat agree" "Strongly agree"</span></span>
<span><span class="co">#&gt;    ..@ label         : chr "I like the color blue"</span></span>
<span><span class="co">#&gt;    ..@ transformation: 'glue' chr "Reversing 'blue' while maintaining correct value labels"</span></span></code></pre></div>
<p>Conversely, if we wanted to show how much people dislike the color
blue, we could show how many people disagree with the statement, however
this is not as intuitive as simply showing agreement with a negative
statement. To fix this proble, we could flip the valence of the question
to something like, “I dislike the color blue” and change the value
labels, while keep the values the same. This is what
<code><a href="../reference/flip_val.html">flip_val()</a></code> does.</p>
<p>Looking below, we can see that the values between <code>blue</code>
and <code>blue_flip</code> are the same, but the value labels and
variable labels are different. Similarly, we can see that the values and
variable labels between <code>blue_flip</code> and <code>blue_rev</code>
are different, but their value labels are the same.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blue_flip</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flip_val.html">flip_val</a></span><span class="op">(</span><span class="va">blue</span>, <span class="st">"I dislike the color blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>blue <span class="op">=</span> <span class="va">blue</span>, blue_rev <span class="op">=</span> <span class="va">blue_rev</span>, blue_flip <span class="op">=</span> <span class="va">blue_flip</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ blue     : int+lbl [1:20] 1, 3, 4, 3, 1, 2, 3, 3, 3, 4, 2, 1, 1, 1, 3, 4, 3, 1, 2, 2</span></span>
<span><span class="co">#&gt;    ..@ labels: Named num [1:4] 1 2 3 4</span></span>
<span><span class="co">#&gt;    .. ..- attr(*, "names")= chr [1:4] "Strongly agree" "Somewhat agree" "Somewhat disagree" "Strongly disagree"</span></span>
<span><span class="co">#&gt;    ..@ label : chr "I like the color blue"</span></span>
<span><span class="co">#&gt;  $ blue_rev : dbl+lbl [1:20] 4, 2, 1, 2, 4, 3, 2, 2, 2, 1, 3, 4, 4, 4, 2, 1, 2, 4, 3, 3</span></span>
<span><span class="co">#&gt;    ..@ labels        : Named num [1:4] 1 2 3 4</span></span>
<span><span class="co">#&gt;    .. ..- attr(*, "names")= chr [1:4] "Strongly disagree" "Somewhat disagree" "Somewhat agree" "Strongly agree"</span></span>
<span><span class="co">#&gt;    ..@ label         : chr "I like the color blue"</span></span>
<span><span class="co">#&gt;    ..@ transformation: 'glue' chr "Reversing 'blue' while maintaining correct value labels"</span></span>
<span><span class="co">#&gt;  $ blue_flip: int+lbl [1:20] 1, 3, 4, 3, 1, 2, 3, 3, 3, 4, 2, 1, 1, 1, 3, 4, 3, 1, 2, 2</span></span>
<span><span class="co">#&gt;    ..@ labels        : Named num [1:4] 1 2 3 4</span></span>
<span><span class="co">#&gt;    .. ..- attr(*, "names")= chr [1:4] "Strongly disagree" "Somewhat disagree" "Somewhat agree" "Strongly agree"</span></span>
<span><span class="co">#&gt;    ..@ label         : chr "I dislike the color blue"</span></span>
<span><span class="co">#&gt;    ..@ transformation: chr "Flipped the valance of `blue` so it is now negative by updating the label and value labels accordingly."</span></span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jacob Dennen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
