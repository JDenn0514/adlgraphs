<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a nested data frame — make_nested • adlgraphs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/Inter-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create a nested data frame — make_nested"><meta name="description" content="This function is very similar to tidyr::nest()in that it creates a data
frame where one of the columns is comprised of a list of data frames."><meta property="og:description" content="This function is very similar to tidyr::nest()in that it creates a data
frame where one of the columns is comprised of a list of data frames."><meta property="og:image" content="https://jdenn0514.github.io/adlgraphs/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-#e5f3f7" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adlgraphs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/data_transformations.html">Data Transformations</a></li>
    <li><a class="dropdown-item" href="../articles/how_to_use_adl_bar_plot.html">Making bar plots</a></li>
    <li><a class="dropdown-item" href="../articles/make_coefficient_plots.html">Making Coefficient Plots</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/JDenn0514/adlgraphs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a nested data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/JDenn0514/adlgraphs/blob/main/R/make_nested.R" class="external-link"><code>R/make_nested.R</code></a></small>
      <div class="d-none name"><code>make_nested.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is very similar to <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code>in that it creates a data
frame where one of the columns is comprised of a list of data frames.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_nested</span><span class="op">(</span><span class="va">data</span>, <span class="va">group</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>Columns to nest by; these will remain in the outer data
frame. If <code>data</code> is not a grouped data frame, then this must be supplied.
If supplying multiple must be in a vector. Can be either a string or
symbol.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Determines if rows with NA should be kept or dropped. Defaults
to TRUE.</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>A character string to separate the values. This is the <code>sep</code>
argument in <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>. Check examples to to see it in action.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>While similar to <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code> there are a few key differences.</p>
<p>The first is that this function uses the vctrs package under the hood,
which makes it about twice as fast as <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code>.</p>
<p>Second, it is more limited in its scope and functionality. Where
<code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code> allows you to determine which columns are in the inner
data frames (the ones in the list column), this function does not.
Instead, you are only able to specify the variables that remain in the
outer data frame.</p>
<p>Third,  this function creates an extra column called "name" that
concatenates the values from the columns in the outer rows together
using <code><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste()</a></code>.</p>
<p>Fourth, unlike in <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::nest()</a></code> where variables supplied to the <code>.by</code>
argument supersede any grouping variables specified through
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code>, <code>nest_data()</code> combines the two to nest the data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># nest by one variable</span></span></span>
<span class="r-in"><span><span class="fu">make_nested</span><span class="op">(</span><span class="va">test_data</span>, <span class="va">pid_f3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pid_f3      data               name       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Democrat    <span style="color: #949494;">&lt;tibble [98 × 45]&gt;</span> Democrat   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Independent <span style="color: #949494;">&lt;tibble [57 × 45]&gt;</span> Independent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Republican  <span style="color: #949494;">&lt;tibble [95 × 45]&gt;</span> Republican </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># nest by multiple variables</span></span></span>
<span class="r-in"><span><span class="fu">make_nested</span><span class="op">(</span><span class="va">test_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pid_f3</span>, <span class="va">edu_f2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pid_f3      edu_f2                       data               name              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Democrat    No College Degree            <span style="color: #949494;">&lt;tibble [52 × 44]&gt;</span> Democrat_No Colle…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Democrat    At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [46 × 44]&gt;</span> Democrat_At Least…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Independent No College Degree            <span style="color: #949494;">&lt;tibble [40 × 44]&gt;</span> Independent_No Co…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Independent At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [17 × 44]&gt;</span> Independent_At Le…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Republican  No College Degree            <span style="color: #949494;">&lt;tibble [50 × 44]&gt;</span> Republican_No Col…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Republican  At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [45 × 44]&gt;</span> Republican_At Lea…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># group data to create nested data frame</span></span></span>
<span class="r-in"><span><span class="va">test_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pid_f3</span>, <span class="va">edu_f2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">make_nested</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pid_f3      edu_f2                       data               name              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Democrat    No College Degree            <span style="color: #949494;">&lt;tibble [52 × 44]&gt;</span> Democrat_No Colle…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Democrat    At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [46 × 44]&gt;</span> Democrat_At Least…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Independent No College Degree            <span style="color: #949494;">&lt;tibble [40 × 44]&gt;</span> Independent_No Co…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Independent At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [17 × 44]&gt;</span> Independent_At Le…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Republican  No College Degree            <span style="color: #949494;">&lt;tibble [50 × 44]&gt;</span> Republican_No Col…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Republican  At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [45 × 44]&gt;</span> Republican_At Lea…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use group_by and nest_data </span></span></span>
<span class="r-in"><span><span class="va">test_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pid_f3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">make_nested</span><span class="op">(</span><span class="va">edu_f2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pid_f3      edu_f2                       data               name              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Democrat    No College Degree            <span style="color: #949494;">&lt;tibble [52 × 44]&gt;</span> Democrat_No Colle…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Democrat    At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [46 × 44]&gt;</span> Democrat_At Least…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Independent No College Degree            <span style="color: #949494;">&lt;tibble [40 × 44]&gt;</span> Independent_No Co…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Independent At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [17 × 44]&gt;</span> Independent_At Le…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Republican  No College Degree            <span style="color: #949494;">&lt;tibble [50 × 44]&gt;</span> Republican_No Col…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Republican  At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [45 × 44]&gt;</span> Republican_At Lea…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use different sep argument</span></span></span>
<span class="r-in"><span><span class="fu">make_nested</span><span class="op">(</span><span class="va">test_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pid_f3</span>, <span class="va">edu_f2</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">":"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pid_f3      edu_f2                       data               name              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Democrat    No College Degree            <span style="color: #949494;">&lt;tibble [52 × 44]&gt;</span> Democrat:No Colle…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Democrat    At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [46 × 44]&gt;</span> Democrat:At Least…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Independent No College Degree            <span style="color: #949494;">&lt;tibble [40 × 44]&gt;</span> Independent:No Co…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Independent At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [17 × 44]&gt;</span> Independent:At Le…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Republican  No College Degree            <span style="color: #949494;">&lt;tibble [50 × 44]&gt;</span> Republican:No Col…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Republican  At Least a Bachelor's Degree <span style="color: #949494;">&lt;tibble [45 × 44]&gt;</span> Republican:At Lea…</span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jacob Dennen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

